#include<cstdio>
#include<vector>
#include<algorithm>
#define bigas(a,b) if(a<b){a=b;}
using namespace std;
int main(void){
	int h=0,i=0,j=0,m=0,ex=0,ans=0,V,E,K,x,y,z;
	static int ya[20][150][150]={0};//ya[i][x][y]???x??????y???2^i??¬???????????´????????¢??°?????????
	static int gen[150]={0};//gen[x]???x??´??????????????§?????°
	static int ima[150]={0};
	static int pre[101][150]={0};//??????????????\??????
	static int poi[101][150]={0};//??????
	for(h=0;h<20;h++){
		for(i=0;i<150;i++){
			for(j=0;j<150;j++){
				ya[h][i][j]=-(1<<30);
				if(i==j){ya[h][i][j]=0;}
			}
		}
	}
	scanf("%d %d %d",&V,&E,&K);
	for(i=0;i<E;i++){
		scanf("%d %d %d",&x,&y,&z);
		bigas(ya[0][x][y],z);
	}
	for(h=1;h<101;h++){
		for(i=0;i<V;i++){
			for(j=0;j<V;j++){
				if(poi[h][j]<poi[h-1][i]+ya[0][i][j]){
					poi[h][j]=poi[h-1][i]+ya[0][i][j];
					pre[h][j]=i;
					if(poi[h][j]>=K){ex=1;K=poi[h][j];ans=j;}
				}
			}
		}
		if(ex==1){break;}
	}
	if(ex==1){
		printf("%d\n",h);
		ima[h]=ans;
		for(i=h-1;i>=0;i--){
			ima[i]=pre[i+1][ima[i+1]];
		}
		for(i=0;i<=h;i++){
			printf("%d ",ima[i]);
		}
		return 0;
	}
	h=0,i=0,j=0,m=0,ex=0,ans=0;
	
	//??????????????§????????????????§£???
	for(h=1;h<20;h++){//2^i??¬????±???????
		for(i=0;i<V;i++){//i??????
			for(j=0;j<V;j++){//j?????§
				for(m=0;m<V;m++){//m????????£???
					bigas(ya[h][i][j],ya[h-1][i][m]+ya[h-1][m][j]);
				}
			}
		}
	}
	//??????????????¬??°??????????????§????±???????
	for(h=19;h>=0;h--){
		for(i=0;i<V;i++){
			for(j=0;j<V;j++){
				bigas(ima[j],gen[i]+ya[h][i][j]);
				if(ima[j]>=K){ex=1;break;}
			}
		}
		if(ex==0){
			ans+=(1<<h);
			for(i=0;i<V;i++){
			gen[i]=ima[i];
			}
		}else{
			for(i=0;i<V;i++){
			ima[i]=gen[i];
			}
		}
		ex=0;
	}
	ans++;
	if(ans+500<(1<<20)){printf("%d\n",ans);}else{printf("-1\n");}
}